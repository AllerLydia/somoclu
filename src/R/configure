#!/bin/bash
cd src
bash autogen.sh
./configure --without-cuda --without-mpi
make
export PKG_CXXFLAGS=`${R_HOME}/bin/Rscript -e "Rcpp:::CxxFlags()"`
cd src
# ${R_HOME}/bin/R CMD SHLIB -lgomp Rsomoclu.cpp somocluWrap.cpp somoclu.o denseCpuKernels.o io.o sparseCpuKernels.o training.o mapDistanceFunctions.o
${R_HOME}/bin/R CMD SHLIB -lgomp Rsomoclu.cpp denseCpuKernels.o sparseCpuKernels.o mapDistanceFunctions.o trainOneEpoch.o uMatrix.o
rm somoclu
cp Rsomoclu.* ../
